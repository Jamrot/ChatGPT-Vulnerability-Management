#define IN_LIBXML
#define TODO								\
#define ROLLBACK_OR	0
#define ROLLBACK_PARENT	1
#define MAX_RECURSE 25000
#define MAX_DEPTH ((sizeof(_xmlValidState.occurs)) * 8)
#define CONT ctxt->vstate->cont
#define NODE ctxt->vstate->node
#define DEPTH ctxt->vstate->depth
#define OCCURS ctxt->vstate->occurs
#define STATE ctxt->vstate->state
#define OCCURRENCE (ctxt->vstate->occurs & (1 << DEPTH))
#define PARENT_OCCURRENCE (ctxt->vstate->occurs & ((1 << DEPTH) - 1))
#define SET_OCCURRENCE ctxt->vstate->occurs |= (1 << DEPTH)
#define RESET_OCCURRENCE ctxt->vstate->occurs &= ((1 << DEPTH) - 1)
#define DEBUG_VALID_STATE(n,c) xmlValidDebug(n,c);
#define DEBUG_VALID_STATE(n,c) xmlValidStateDebug(ctxt);
#define DEBUG_VALID_MSG(m)					\
#define DEBUG_VALID_STATE(n,c)
#define DEBUG_VALID_MSG(m)
#define CHECK_DTD						\
#define DICT_FREE(str)						\
#define bottom_valid

static void
xmlDumpElementContent(xmlBufferPtr buf, xmlElementContentPtr content, int glob) {
    if (content == NULL) return;

    if (glob) xmlBufferWriteChar(buf, "(");
    switch (content->type) {
        case XML_ELEMENT_CONTENT_PCDATA:
            xmlBufferWriteChar(buf, "#PCDATA");
	    break;
	case XML_ELEMENT_CONTENT_ELEMENT:
	    if (content->prefix != NULL) {
		xmlBufferWriteCHAR(buf, content->prefix);
		xmlBufferWriteChar(buf, ":");
	    }
	    xmlBufferWriteCHAR(buf, content->name);
	    break;
	case XML_ELEMENT_CONTENT_SEQ:
	    /* BUG: SEGV on unknown address
	     * 	    if ((content->c1->type == XML_ELEMENT_CONTENT_OR) ||
	     * 	        (content->c1->type == XML_ELEMENT_CONTENT_SEQ))
	     * 		xmlDumpElementContent(buf, content->c1, 1);
	     * 	    else
	     * 		xmlDumpElementContent(buf, content->c1, 0);
	     *             xmlBufferWriteChar(buf, " , ");
	     * 	    if ((content->c2->type == XML_ELEMENT_CONTENT_OR) ||
	     * 	        ((content->c2->type == XML_ELEMENT_CONTENT_SEQ) &&
	     * 		 (content->c2->ocur != XML_ELEMENT_CONTENT_ONCE)))
	     * 		xmlDumpElementContent(buf, content->c2, 1);
	     * 	    else
	     * 		xmlDumpElementContent(buf, content->c2, 0);
	     * 	    break;
	     * 	case XML_ELEMENT_CONTENT_OR:
	     * 	    if ((content->c1->type == XML_ELEMENT_CONTENT_OR) ||
	     * 	        (content->c1->type == XML_ELEMENT_CONTENT_SEQ))
	     * 		xmlDumpElementContent(buf, content->c1, 1);
	     * 	    else
	     * 		xmlDumpElementContent(buf, content->c1, 0);
	     *             xmlBufferWriteChar(buf, " | ");
	     * 	    if ((content->c2->type == XML_ELEMENT_CONTENT_SEQ) ||
	     * 	        ((content->c2->type == XML_ELEMENT_CONTENT_OR) &&
	     * 		 (content->c2->ocur != XML_ELEMENT_CONTENT_ONCE)))
	     * 		xmlDumpElementContent(buf, content->c2, 1);
	     * 	    else
	     * FIXED:
	     */
