#define	streq(a,b)	(strcmp(a,b) == 0)
#define	CopyField(tag, v) \
#define	CopyField2(tag, v1, v2) \
#define	CopyField3(tag, v1, v2, v3) \
#define	CopyField4(tag, v1, v2, v3, v4) \
#define	NTAGS	(sizeof (tags) / sizeof (tags[0]))
#define M_E		2.7182818284590452354

static void
setImage1(const uint8* br, uint32 rw, uint32 rh)
{
    int step = rh;
    int limit = tnh;
    int err = 0;
    int bpr = TIFFhowmany8(rw);
    int sy = 0;
    uint8* row = thumbnail;
    uint32 dy;
    for (dy = 0; dy < tnh; dy++) {
	const uint8* rows[256];
	uint32 nrows = 1;
	fprintf(stderr, "bpr=%d, sy=%d, bpr*sy=%d\n", bpr, sy, bpr*sy);
	rows[0] = br + bpr*sy;
	err += step;
	while (err >= limit) {
	    err -= limit;
	    sy++;
	    if (err >= limit)
		/* BUG: stack buffer overflow
		 * 		rows[nrows++] = br + bpr*sy;
		 * 	}
		 * 	setrow(row, nrows, rows);
		 * FIXED:
		 */
